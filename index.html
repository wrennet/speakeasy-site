<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Speakeasy Relay ‚Äî Private inference via x402 v2</title>
    <meta name="description" content="Speakeasy Relay is a private, uncensored AI inference gateway using x402 payments. OpenAI-compatible streaming chat completions with USDC on Base, no account required." />
    <meta name="keywords" content="x402, x402scan, private inference, uncensored AI, OpenAI compatible API, chat completions, streaming inference, pay per request, USDC, Base, eip155:8453, agent payments, Venice" />
    <meta property="og:title" content="Speakeasy Relay ‚Äî Private inference via x402 v2" />
    <meta property="og:description" content="Private, uncensored AI inference via x402. OpenAI-compatible streaming chat completions with USDC on Base, no account required." />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://speakeasyrelay.com" />
    <meta property="og:image" content="https://speakeasyrelay.com/og.svg" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Speakeasy Relay" />
    <meta name="twitter:description" content="Private, uncensored AI inference via x402. OpenAI-compatible streaming chat completions with USDC on Base, no account required." />
    <meta name="twitter:image" content="https://speakeasyrelay.com/og.svg" />
    <link rel="icon" href="/favicon.svg" type="image/svg+xml" />
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@500;700&family=IBM+Plex+Sans:wght@400;500;600&display=swap');
      :root {
        --bg: oklch(0.14 0.03 260);
        --panel: oklch(0.19 0.03 258);
        --panel-2: oklch(0.22 0.04 255);
        --ink: oklch(0.95 0.01 260);
        --muted: oklch(0.76 0.03 255);
        --line: oklch(0.35 0.05 252);
        --accent: oklch(0.74 0.17 290);
        --accent-2: oklch(0.79 0.16 40);
      }
      * { box-sizing: border-box; }
      body {
        margin: 0;
        font-family: 'IBM Plex Sans', system-ui, sans-serif;
        background: var(--bg);
        color: var(--ink);
      }
      .wrap { max-width: 1080px; margin: 0 auto; padding: 64px 24px 92px; }
      .hero { margin-top: 14px; }
      h1 {
        margin: 0;
        font-family: 'Space Grotesk', sans-serif;
        font-size: clamp(34px, 4.2vw, 50px);
        line-height: 1.08;
        letter-spacing: -0.012em;
        max-width: 18ch;
      }
      .lead { margin-top: 14px; color: var(--muted); font-size: 17px; max-width: 56ch; line-height: 1.58; }
      .meta-strip { display:flex; gap:12px; flex-wrap:wrap; margin-top: 18px; }
      .meta-pill {
        border:1px solid var(--line);
        border-radius:999px;
        padding:10px 16px;
        background: color-mix(in oklab, var(--panel) 82%, black 18%);
        font-size:12px;
        line-height: 1.35;
        color: var(--muted);
      }
      .meta-pill .label { color: color-mix(in oklab, var(--muted), white 12%); font-weight: 500; }
      .meta-pill .value { color: var(--ink); font-weight: 600; }
      .meta-pill .mono { font-size: 12px; }

      .cta { display:flex; gap:10px; flex-wrap:wrap; margin: 22px 0 10px; }
      a.btn {
        text-decoration:none; border-radius:8px; padding:12px 15px; font-weight:600; font-size: 14px;
        border:1px solid var(--line);
      }
      a.primary {
        color: #eaf0ff;
        background: oklch(0.41 0.09 257);
        border-color: oklch(0.47 0.09 257);
      }
      a.primary:hover {
        background: oklch(0.46 0.10 257);
      }
      a.secondary { color: var(--ink); background: color-mix(in oklab, var(--panel) 82%, black 18%); }

      .triptych { display:grid; grid-template-columns: 1fr 1fr 1fr; gap: 12px; margin: 22px 0 30px; }
      .block { border: 1px solid var(--line); border-radius: 10px; padding: 14px; background: var(--panel); }
      .block h4 { margin: 0 0 8px; font-family: 'Space Grotesk', sans-serif; font-size: 14px; color: var(--ink); }
      .block p { margin: 0; color: var(--muted); font-size: 13px; line-height: 1.45; }
      .mono { font-family: ui-monospace, SFMono-Regular, Menlo, monospace; font-size: 13px; }

      h2 { margin: 38px 0 12px; font-family: 'Space Grotesk', sans-serif; letter-spacing: -0.01em; }
      .tab-row {
        display:flex;
        gap:6px;
        flex-wrap:wrap;
        margin: 8px 0 14px;
        padding-bottom: 6px;
        border-bottom: 1px solid color-mix(in oklab, var(--line), black 20%);
      }
      .tab-btn {
        border: 1px solid transparent;
        background: transparent;
        color: var(--muted);
        padding: 7px 11px;
        font-size: 12.5px;
        font-weight: 600;
        border-radius: 8px;
        cursor: pointer;
        transition: color .15s ease, background-color .15s ease, border-color .15s ease;
      }
      .tab-btn:hover {
        color: var(--ink);
        background: color-mix(in oklab, var(--panel) 70%, black 30%);
        border-color: color-mix(in oklab, var(--line), transparent 25%);
      }
      .tab-btn.active {
        color: var(--ink);
        background: color-mix(in oklab, oklch(0.45 0.11 255) 20%, var(--panel) 80%);
        border-color: color-mix(in oklab, oklch(0.50 0.10 255), transparent 30%);
      }
      .tab-panel { display: none; }
      .tab-panel.active { display: block; }
      .code-wrap { margin: 10px 0 16px; }
      .code-head { display:flex; align-items:center; justify-content:space-between; margin-bottom:8px; }
      .code-head strong { font-size:14px; color: var(--ink); }
      pre { margin: 0; overflow:auto; border:1px solid var(--line); border-radius:10px; padding:14px; background: color-mix(in oklab, var(--panel) 78%, black 22%); }
      code { font-family: ui-monospace, SFMono-Regular, Menlo, monospace; font-size: 12.8px; color: oklch(0.9 0.02 265); }
      .copy-btn {
        border:1px solid var(--line);
        background: var(--panel-2);
        color: var(--ink);
        border-radius:6px;
        width:30px;
        height:30px;
        display:inline-flex;
        align-items:center;
        justify-content:center;
        font-size:14px;
        cursor:pointer;
      }
      .muted { color: var(--muted); font-size: 13px; }

      table { width:100%; border-collapse: collapse; border:1px solid var(--line); border-radius: 10px; overflow:hidden; }
      th, td { text-align:left; padding:10px 12px; border-bottom:1px solid color-mix(in oklab, var(--line), black 20%); font-size:14px; }
      th { font-family: 'Space Grotesk', sans-serif; font-weight: 700; background: var(--panel-2); }
      tr:last-child td { border-bottom:none; }

      footer { margin-top: 44px; padding-top: 20px; border-top:1px solid var(--line); display:flex; gap:14px; flex-wrap:wrap; }
      footer a { color: color-mix(in oklab, var(--ink), var(--accent) 18%); text-decoration:none; font-size:13px; }

      @media (max-width: 900px) {
        .hero { grid-template-columns: 1fr; }
        .triptych { grid-template-columns: 1fr; }
      }
    </style>
  </head>
  <body>
    <main class="wrap">
      <section class="hero">
        <div>
          <h1>Private, uncensored inference via x402.</h1>
          <p class="lead">Speakeasy Relay provides OpenAI-compatible streaming chat completions with pay-per-request USDC settlement on Base. No account required.</p>

          <div class="cta">
            <a class="btn primary" href="https://www.x402scan.com/server/084f9441-37df-4152-b586-0d3e43cfc81b" target="_blank" rel="noreferrer">Try on x402scan</a>
            <a class="btn secondary" href="https://api.speakeasyrelay.com/.well-known/x402" target="_blank" rel="noreferrer">Discovery Doc</a>
            <a class="btn secondary" href="https://api.speakeasyrelay.com/v1/pricing" target="_blank" rel="noreferrer">Pricing</a>
          </div>

          <div class="meta-strip">
            <span class="meta-pill"><span class="label">Endpoint</span> ¬∑ <span class="value mono">POST /v1/chat/completions</span></span>
            <span class="meta-pill"><span class="label">Network</span> ¬∑ <span class="value mono">eip155:8453</span></span>
            <span class="meta-pill"><span class="label">Asset</span> ¬∑ <span class="value mono">USDC</span></span>
            <span class="meta-pill"><span class="label">Discovery</span> ¬∑ <span class="value mono">/.well-known/x402</span></span>
          </div>
        </div>
      </section>

      <section class="triptych">
        <article class="block"><h4>Private + Uncensored</h4><p>Built for agents and developers who want fewer restrictions and direct paid inference access.</p></article>
        <article class="block"><h4>OpenAI-Compatible</h4><p>Drop into existing chat-completions workflows with minimal integration friction.</p></article>
        <article class="block"><h4>On-Chain Settlement</h4><p>Settlement path validated with tx receipt + USDC Transfer-event checks, not just stream success.</p></article>
      </section>

      <h2>Quick Start</h2>
      <div class="tab-row" role="tablist" aria-label="Quickstart code tabs">
        <button class="tab-btn active" data-tab="tab-pricing" role="tab" aria-selected="true">Pricing</button>
        <button class="tab-btn" data-tab="tab-unpaid" role="tab" aria-selected="false">Probe 402</button>
        <button class="tab-btn" data-tab="tab-verify" role="tab" aria-selected="false">Verify Script</button>
        <button class="tab-btn" data-tab="tab-chat" role="tab" aria-selected="false">Local Chat</button>
      </div>

      <div class="tab-panel active" id="tab-pricing" role="tabpanel">
        <div class="code-wrap">
          <div class="code-head">
            <strong>Fetch pricing</strong>
            <button class="copy-btn" data-copy="#cmd-pricing" aria-label="Copy pricing command" title="Copy">‚ßâ</button>
          </div>
          <pre id="cmd-pricing"><code>curl https://api.speakeasyrelay.com/v1/pricing</code></pre>
        </div>
      </div>

      <div class="tab-panel" id="tab-unpaid" role="tabpanel">
        <div class="code-wrap">
          <div class="code-head">
            <strong>Unpaid probe (expect 402)</strong>
            <button class="copy-btn" data-copy="#cmd-unpaid" aria-label="Copy unpaid probe command" title="Copy">‚ßâ</button>
          </div>
          <pre id="cmd-unpaid"><code>curl -X POST https://api.speakeasyrelay.com/v1/chat/completions \
  -H 'content-type: application/json' \
  -d '{"model":"venice-uncensored","messages":[{"role":"user","content":"Say hello."}],"max_tokens":64,"stream":true}'</code></pre>
        </div>
      </div>

      <div class="tab-panel" id="tab-verify" role="tabpanel">
        <div class="code-wrap">
          <div class="code-head">
            <strong>Verify script (paste into a file)</strong>
            <button class="copy-btn" data-copy="#cmd-chat60" aria-label="Copy verification script" title="Copy">‚ßâ</button>
          </div>
          <pre id="cmd-chat60"><code>cat > chat-in-60s.cjs <<'EOF'
const { privateKeyToAccount } = require("viem/accounts");
const { createPaymentHeader, selectPaymentRequirements } = require("x402/client");

async function main() {
  const PRIVATE_KEY = process.env.PRIVATE_KEY;
  const GATEWAY = process.env.GATEWAY_URL || "https://api.speakeasyrelay.com";
  if (!PRIVATE_KEY) throw new Error("Missing PRIVATE_KEY env var");

  const account = privateKeyToAccount(PRIVATE_KEY);
  const model = "venice-uncensored";

  const pricingRes = await fetch(`${GATEWAY}/v1/pricing`);
  const pricing = await pricingRes.json();
  const selected = selectPaymentRequirements(pricing.models[model].accepts, "base");

  const req = {
    ...selected,
    network: selected.network === "eip155:8453" ? "base" : selected.network,
    maxAmountRequired: selected.maxAmountRequired || selected.amount,
    resource: selected.resource || pricing.models[model].resource?.url || `${GATEWAY}/v1/chat/completions`,
  };

  const payment = await createPaymentHeader(account, pricing.models[model].x402Version, req);

  const body = {
    model,
    messages: [{ role: "user", content: "Say hello in one sentence." }],
    max_tokens: 64,
    stream: true,
  };

  const res = await fetch(`${GATEWAY}/v1/chat/completions`, {
    method: "POST",
    headers: {
      "content-type": "application/json",
      "payment-signature": payment,
      "x-payment": payment,
    },
    body: JSON.stringify(body),
  });

  console.log(`HTTP ${res.status}`);
  console.log(await res.text());
}

main().catch((err) => {
  console.error("‚ùå", err.message || err);
  process.exit(1);
});
EOF

npm i x402 viem
PRIVATE_KEY=0xYOUR_PRIVATE_KEY node chat-in-60s.cjs</code></pre>
        </div>
      </div>

      <div class="tab-panel" id="tab-chat" role="tabpanel">
        <div class="code-wrap">
          <div class="code-head">
            <strong>Local interactive chat (paste into a file)</strong>
            <button class="copy-btn" data-copy="#cmd-chatlocal" aria-label="Copy local chat script" title="Copy">‚ßâ</button>
          </div>
          <pre id="cmd-chatlocal"><code>cat > chat-local.cjs <<'EOF'
const readline = require("node:readline/promises");
const { stdin, stdout } = require("node:process");
const { privateKeyToAccount } = require("viem/accounts");
const { createPaymentHeader, selectPaymentRequirements } = require("x402/client");

const GATEWAY = process.env.GATEWAY_URL || "https://api.speakeasyrelay.com";
const PRIVATE_KEY = process.env.PRIVATE_KEY;
const MODEL = process.env.MODEL || "venice-uncensored";
const MAX_TOKENS = Number(process.env.MAX_TOKENS || 256);

if (!PRIVATE_KEY) {
  console.error("‚ùå Missing PRIVATE_KEY env var");
  process.exit(1);
}

const account = privateKeyToAccount(PRIVATE_KEY);
const history = [{ role: "system", content: "You are helpful and concise." }];

function normalizeReq(selected, topResourceUrl) {
  return {
    ...selected,
    network: selected.network === "eip155:8453" ? "base" : selected.network,
    maxAmountRequired: selected.maxAmountRequired || selected.amount,
    resource: selected.resource || topResourceUrl || `${GATEWAY}/v1/chat/completions`,
  };
}

async function getPricingReq(model) {
  const pricingRes = await fetch(`${GATEWAY}/v1/pricing`);
  const pricing = await pricingRes.json();
  const modelInfo = pricing.models?.[model];
  if (!modelInfo) throw new Error(`Model not found: ${model}`);
  const selected = selectPaymentRequirements(modelInfo.accepts, "base");
  return { x402Version: modelInfo.x402Version, req: normalizeReq(selected, modelInfo.resource?.url) };
}

async function paidChatOnce(model) {
  const { x402Version, req } = await getPricingReq(model);
  const payment = await createPaymentHeader(account, x402Version, req);

  const res = await fetch(`${GATEWAY}/v1/chat/completions`, {
    method: "POST",
    headers: {
      "content-type": "application/json",
      "payment-signature": payment,
      "x-payment": payment,
    },
    body: JSON.stringify({ model, messages: history, max_tokens: MAX_TOKENS, stream: true }),
  });

  const raw = await res.text();
  const lines = raw.split("\n");
  let content = "";
  let settlement = null;
  let event = null;

  for (const line of lines) {
    if (line.startsWith("event: ")) { event = line.slice(7).trim(); continue; }
    if (!line.startsWith("data: ")) continue;
    const payload = line.slice(6).trim();
    if (!payload || payload === "[DONE]") continue;

    try {
      if (event === "payment_settlement") { settlement = JSON.parse(payload); event = null; continue; }
      const parsed = JSON.parse(payload);
      content += parsed?.choices?.[0]?.delta?.content || "";
      event = null;
    } catch { event = null; }
  }

  return { content: content.trim(), settlement };
}

(async () => {
  console.log(`üê¶ Local paid chat\nGateway: ${GATEWAY}\nWallet: ${account.address}\nModel: ${MODEL}`);
  console.log("Type /exit to quit, /clear to reset conversation.\n");

  const rl = readline.createInterface({ input: stdin, output: stdout });
  while (true) {
    const input = (await rl.question("you> ")).trim();
    if (!input) continue;
    if (input === "/exit") break;
    if (input === "/clear") { history.length = 1; console.log("cleared.\n"); continue; }

    history.push({ role: "user", content: input });
    try {
      const { content, settlement } = await paidChatOnce(MODEL);
      history.push({ role: "assistant", content: content || "(no content)" });
      console.log(`assistant> ${content || "(no content)"}`);
      if (settlement) console.log(`settlement> ${settlement.settlement_status || "unknown"}`);
      console.log();
    } catch (err) {
      console.error(`‚ùå ${err.message || err}`);
      history.pop();
      console.log();
    }
  }
  rl.close();
})();
EOF

npm i x402 viem
PRIVATE_KEY=0xYOUR_PRIVATE_KEY node chat-local.cjs</code></pre>
        </div>
      </div>
      <p class="muted">These are self-contained scripts you can run locally against the live Speakeasy endpoint.</p>

      <footer>
        <a href="https://api.speakeasyrelay.com/v1/chat/completions" target="_blank" rel="noreferrer">API</a>
        <a href="https://api.speakeasyrelay.com/.well-known/x402" target="_blank" rel="noreferrer">Discovery</a>
        <a href="https://www.x402scan.com/server/084f9441-37df-4152-b586-0d3e43cfc81b" target="_blank" rel="noreferrer">x402scan</a>
      </footer>
    </main>

    <script>
      document.querySelectorAll('.tab-btn').forEach((btn) => {
        btn.addEventListener('click', () => {
          const target = btn.getAttribute('data-tab');
          if (!target) return;

          document.querySelectorAll('.tab-btn').forEach((b) => {
            b.classList.remove('active');
            b.setAttribute('aria-selected', 'false');
          });
          btn.classList.add('active');
          btn.setAttribute('aria-selected', 'true');

          document.querySelectorAll('.tab-panel').forEach((panel) => {
            panel.classList.toggle('active', panel.id === target);
          });
        });
      });

      document.querySelectorAll('.copy-btn').forEach((btn) => {
        btn.addEventListener('click', async () => {
          const selector = btn.getAttribute('data-copy');
          const el = selector ? document.querySelector(selector) : null;
          if (!el) return;
          const text = (el.textContent || '').trim();
          try {
            await navigator.clipboard.writeText(text);
            const prev = btn.textContent;
            btn.textContent = '‚úì';
            setTimeout(() => (btn.textContent = prev), 1000);
          } catch {
            btn.textContent = '!';
            setTimeout(() => (btn.textContent = '‚ßâ'), 1000);
          }
        });
      });
    </script>
  </body>
</html>
